add_library(fast-lopq
    fast-lopq.cpp
)

add_custom_target(protoc-run
    COMMAND protoc -I ../proto --cpp_out=autogenerated/lopq-model lopq_model.proto
    WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
    COMMENT "Run protoc to generate lopq model source in ${CMAKE_CURRENT_SOURCE_DIR}/autogenerated/lopq-model"
    SOURCES ${protoc-run_SOURCES}
)

target_link_libraries(fast-lopq
    ext-blaze
    libprotobuf
)

add_dependencies(fast-lopq
    protoc-run
)
